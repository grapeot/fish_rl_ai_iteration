{"iteration": 16, "timestamp": "2025-11-12T02:32:23.220941Z", "summary": {"episodes": 12, "avg_final_survival_rate": 0.915798611111111, "min_final_survival_rate": 0.8333333333333334, "avg_min_survival_rate": 0.915798611111111, "min_of_min_survival_rate": 0.8333333333333334, "median_min_survival_rate": 0.9166666666666667}, "death_stats": {"total_fish_samples": 1152, "survival_fraction": 0.9157986111111112, "mean_death_step": 460.41059027777777, "median_death_step": 500.0, "p10": 500.0, "p25": 500.0, "p75": 500.0, "p90": 500.0, "early_death_fraction_100": 0.08159722222222222, "early_death_fraction_150": 0.08159722222222222}, "density_penalty_coef": 0.02, "escape_boost_speed": 0.75, "step_one_death_count": 19, "step_one_death_ratio": 0.016493055555555556, "episode_seeds": [415761638, 2041589378, 2050728466, 94517707, 1603170561, 649166139, 386912641, 301645393, 340606598, 1209146768, 1240647970, 457751498], "multi_eval_num_fish": 96, "multi_eval_episodes": 12, "death_hist_path": "/Users/grapeot/co/fish_rl/experiments/v32/artifacts/plots/dev_v32_stage_tail_ratio_r1_multi_eval_hist/dev_v32_stage_tail_ratio_r1_iter016_death_hist.png", "step_one_deaths": [{"fish_idx": 31, "predator_index": 0, "fish_position": [2.989987373352051, -0.16386476159095764], "predator_position": [2.557391405105591, -0.22674185037612915], "predator_velocity": [0.1088944748044014, 1.7505093812942505]}, {"fish_idx": 41, "predator_index": 0, "fish_position": [0.479641854763031, -2.7224795818328857], "predator_position": [0.5048748254776001, -2.578052043914795], "predator_velocity": [1.5236293077468872, -1.5843420028686523]}, {"fish_idx": 17, "predator_index": 0, "fish_position": [-1.040776014328003, 0.23421156406402588], "predator_position": [-0.7678982019424438, -0.31641027331352234], "predator_velocity": [-0.8995420336723328, 0.43338340520858765]}, {"fish_idx": 67, "predator_index": 0, "fish_position": [-0.4671936631202698, -0.6539403200149536], "predator_position": [-0.7678982019424438, -0.31641027331352234], "predator_velocity": [-0.8995420336723328, 0.43338340520858765]}, {"fish_idx": 73, "predator_index": 0, "fish_position": [-0.7347314357757568, 3.0587496757507324], "predator_position": [-0.9582223296165466, 2.85322642326355], "predator_velocity": [0.008451585657894611, 1.6748567819595337]}, {"fish_idx": 92, "predator_index": 0, "fish_position": [-1.2298179864883423, 2.3468925952911377], "predator_position": [-0.9582223296165466, 2.85322642326355], "predator_velocity": [0.008451585657894611, 1.6748567819595337]}, {"fish_idx": 21, "predator_index": 0, "fish_position": [1.789049744606018, 0.9047081470489502], "predator_position": [1.4063650369644165, 0.42172539234161377], "predator_velocity": [0.9068188071250916, 1.2850711345672607]}, {"fish_idx": 48, "predator_index": 0, "fish_position": [1.7696744203567505, 0.9024159908294678], "predator_position": [1.4063650369644165, 0.42172539234161377], "predator_velocity": [0.9068188071250916, 1.2850711345672607]}, {"fish_idx": 55, "predator_index": 0, "fish_position": [1.5793178081512451, 0.15617990493774414], "predator_position": [1.4063650369644165, 0.42172539234161377], "predator_velocity": [0.9068188071250916, 1.2850711345672607]}, {"fish_idx": 68, "predator_index": 0, "fish_position": [1.1858301162719727, 0.15353818237781525], "predator_position": [1.4063650369644165, 0.42172539234161377], "predator_velocity": [0.9068188071250916, 1.2850711345672607]}, {"fish_idx": 90, "predator_index": 0, "fish_position": [1.7779821157455444, 0.2539045810699463], "predator_position": [1.4063650369644165, 0.42172539234161377], "predator_velocity": [0.9068188071250916, 1.2850711345672607]}, {"fish_idx": 14, "predator_index": 0, "fish_position": [-1.1406508684158325, 1.3498835563659668], "predator_position": [-0.8316119313240051, 1.6309808492660522], "predator_velocity": [0.10914342850446701, 1.0578562021255493]}, {"fish_idx": 33, "predator_index": 0, "fish_position": [-1.1244490146636963, 1.2849034070968628], "predator_position": [-0.8316119313240051, 1.6309808492660522], "predator_velocity": [0.10914342850446701, 1.0578562021255493]}, {"fish_idx": 0, "predator_index": 0, "fish_position": [1.6497149467468262, 2.108426332473755], "predator_position": [1.4033870697021484, 2.7455599308013916], "predator_velocity": [-0.44074544310569763, 1.6362972259521484]}, {"fish_idx": 17, "predator_index": 0, "fish_position": [0.9331859946250916, 2.6481239795684814], "predator_position": [1.4033870697021484, 2.7455599308013916], "predator_velocity": [-0.44074544310569763, 1.6362972259521484]}, {"fish_idx": 94, "predator_index": 0, "fish_position": [1.3495148420333862, 3.08904767036438], "predator_position": [1.4033870697021484, 2.7455599308013916], "predator_velocity": [-0.44074544310569763, 1.6362972259521484]}, {"fish_idx": 64, "predator_index": 0, "fish_position": [-0.219898983836174, 1.7136101722717285], "predator_position": [0.07931248843669891, 1.1823488473892212], "predator_velocity": [0.05588739365339279, 0.21041685342788696]}, {"fish_idx": 83, "predator_index": 0, "fish_position": [0.13480599224567413, 1.0956072807312012], "predator_position": [0.07931248843669891, 1.1823488473892212], "predator_velocity": [0.05588739365339279, 0.21041685342788696]}, {"fish_idx": 85, "predator_index": 0, "fish_position": [-0.4211811423301697, 0.7014594078063965], "predator_position": [0.07931248843669891, 1.1823488473892212], "predator_velocity": [0.05588739365339279, 0.21041685342788696]}], "step_one_clusters": {"total": 19, "angle_bin_deg": 30.0, "speed_bin": 0.4, "clusters": [{"angle_deg_start": 30.0, "angle_deg_end": 60.0, "speed_bin_start": 1.2000000000000002, "speed_bin_end": 1.6, "count": 5, "share": 0.2631578947368421}, {"angle_deg_start": 60.0, "angle_deg_end": 90.0, "speed_bin_start": 1.6, "speed_bin_end": 2.0, "count": 3, "share": 0.15789473684210525}, {"angle_deg_start": 90.0, "angle_deg_end": 120.0, "speed_bin_start": 1.6, "speed_bin_end": 2.0, "count": 3, "share": 0.15789473684210525}, {"angle_deg_start": 60.0, "angle_deg_end": 90.0, "speed_bin_start": 0.0, "speed_bin_end": 0.4, "count": 3, "share": 0.15789473684210525}, {"angle_deg_start": 150.0, "angle_deg_end": 180.0, "speed_bin_start": 0.8, "speed_bin_end": 1.2000000000000002, "count": 2, "share": 0.10526315789473684}, {"angle_deg_start": 60.0, "angle_deg_end": 90.0, "speed_bin_start": 0.8, "speed_bin_end": 1.2000000000000002, "count": 2, "share": 0.10526315789473684}, {"angle_deg_start": 300.0, "angle_deg_end": 330.0, "speed_bin_start": 2.0, "speed_bin_end": 2.4000000000000004, "count": 1, "share": 0.05263157894736842}]}, "pre_roll_stats_summary": {"sampled_episodes": 12, "spawn_radius": {"count": 12, "mean": 0.9633116287489732, "std": 0.4521781029514531, "p10": 0.4665436089038849, "p50": 0.94510817527771, "p90": 1.5451639533042907, "min": 0.2053057700395584, "max": 1.5853996276855469}, "spawn_angle_deg": {"count": 12, "mean": 8.750089248021444, "std": 101.4204115971533, "p10": -140.53766937255858, "p50": 13.503016948699951, "p90": 161.58109512329105, "min": -165.5211181640625, "max": 172.2237548828125}, "initial_heading_deg": {"count": 12, "mean": -43.453229447205864, "std": 82.50795190588212, "p10": -130.00769958496093, "p50": -67.97367858886719, "p90": 54.17826614379884, "min": -142.76788330078125, "max": 139.86367797851562}, "final_heading_deg": {"count": 12, "mean": 67.8956750233968, "std": 82.85365744325364, "p10": -36.93577346801757, "p50": 88.01897811889648, "p90": 130.76490707397463, "min": -154.15740966796875, "max": 156.91636657714844}, "initial_speed": {"count": 12, "mean": 1.4999999503294628, "std": 5.877097232242043e-08, "p10": 1.4999998807907104, "p50": 1.5, "p90": 1.5, "min": 1.4999998807907104, "max": 1.5}, "final_speed": {"count": 12, "mean": 1.2795239873230457, "std": 0.6911550690265562, "p10": 0.21816048175096514, "p50": 1.5553203225135803, "p90": 2.181354558467865, "min": 0.16987338662147522, "max": 2.248997926712036}, "angle_jitter_deg": {"count": 240, "mean": 0.22558058474830087, "std": 9.83246418249301, "p10": -13.210143313585615, "p50": 0.35031010868619233, "p90": 13.661788055457784, "min": -17.082569122115782, "max": 17.078256904542062}, "speed_scale": {"count": 240, "mean": 2.340121712743806, "std": 5.9293530528713125, "p10": 0.20157473304158285, "p50": 0.9693496449135908, "p90": 4.774152030600053, "min": 0.006986785253811502, "max": 78.64661665436475}, "heading_bias_angle_deg": {"count": 12, "mean": 196.54676952031173, "std": 105.51206684646954, "p10": 37.94705032713644, "p50": 236.5683766818123, "p90": 298.9832709301532, "min": 2.110849203680576, "max": 321.42990022230686}, "prewarm_override_count": 0, "prewarm_override_ratio": 0.0, "spawn_angle_hist_deg": {"bins": [3, 1, 0, 1, 0, 2, 0, 0, 0, 0, 0, 0], "edges": [0.0, 30.0, 60.0, 90.0, 120.0, 150.0, 180.0, 210.0, 240.0, 270.0, 300.0, 330.0, 360.0]}, "initial_speed_hist": {"bins": [0, 0, 0, 0, 0, 0, 0, 0, 0, 12], "edges": [0.0, 0.16, 0.32, 0.48, 0.64, 0.8, 0.96, 1.12, 1.28, 1.44, 1.6]}}, "penalty_gate": {"event": "locked", "stage": 0, "phase_limit": 3, "success_streak": 0, "freeze_until": 0, "failure_detected": false, "failure_streak": 0, "rolling_p10_median": 500.0, "step_one_death_ratio": 0.016493055555555556}}
{"iteration": 32, "timestamp": "2025-11-12T02:38:15.195665Z", "summary": {"episodes": 12, "avg_final_survival_rate": 0.9288194444444446, "min_final_survival_rate": 0.8958333333333334, "avg_min_survival_rate": 0.9288194444444446, "min_of_min_survival_rate": 0.8958333333333334, "median_min_survival_rate": 0.9270833333333334}, "death_stats": {"total_fish_samples": 1152, "survival_fraction": 0.9288194444444444, "mean_death_step": 468.30121527777777, "median_death_step": 500.0, "p10": 500.0, "p25": 500.0, "p75": 500.0, "p90": 500.0, "early_death_fraction_100": 0.06336805555555555, "early_death_fraction_150": 0.06510416666666667}, "density_penalty_coef": 0.05, "escape_boost_speed": 0.78, "step_one_death_count": 12, "step_one_death_ratio": 0.010416666666666666, "episode_seeds": [2024419067, 1230445557, 209109280, 1452627962, 531828026, 1078225169, 571837619, 1024539706, 2053198799, 2145061983, 1196481141, 356161867], "multi_eval_num_fish": 96, "multi_eval_episodes": 12, "death_hist_path": "/Users/grapeot/co/fish_rl/experiments/v32/artifacts/plots/dev_v32_stage_tail_ratio_r1_multi_eval_hist/dev_v32_stage_tail_ratio_r1_iter032_death_hist.png", "step_one_deaths": [{"fish_idx": 53, "predator_index": 0, "fish_position": [-2.9157605171203613, 0.1308937668800354], "predator_position": [-2.5241172313690186, -0.024878546595573425], "predator_velocity": [-0.42021268606185913, 1.2845813035964966]}, {"fish_idx": 35, "predator_index": 0, "fish_position": [3.3165745735168457, -0.7256550192832947], "predator_position": [2.845566511154175, -1.1435444355010986], "predator_velocity": [1.7224165201187134, -0.5687110424041748]}, {"fish_idx": 65, "predator_index": 0, "fish_position": [2.89456844329834, -0.5881672501564026], "predator_position": [2.845566511154175, -1.1435444355010986], "predator_velocity": [1.7224165201187134, -0.5687110424041748]}, {"fish_idx": 10, "predator_index": 0, "fish_position": [-0.0641709566116333, 1.446711778640747], "predator_position": [0.3178190588951111, 1.7066378593444824], "predator_velocity": [0.12668557465076447, 0.8995001912117004]}, {"fish_idx": 34, "predator_index": 0, "fish_position": [-1.245755910873413, -0.41207343339920044], "predator_position": [-1.7684305906295776, -0.01772015169262886], "predator_velocity": [-1.163255214691162, -0.08356350660324097]}, {"fish_idx": 26, "predator_index": 0, "fish_position": [3.12192702293396, 2.261263370513916], "predator_position": [2.8699560165405273, 2.259446859359741], "predator_velocity": [1.121342658996582, 1.4212406873703003]}, {"fish_idx": 18, "predator_index": 0, "fish_position": [1.7110497951507568, 0.8815765976905823], "predator_position": [2.3195910453796387, 0.6599564552307129], "predator_velocity": [0.0633288025856018, 1.1589860916137695]}, {"fish_idx": 51, "predator_index": 0, "fish_position": [2.4712772369384766, 0.8618600368499756], "predator_position": [2.3195910453796387, 0.6599564552307129], "predator_velocity": [0.0633288025856018, 1.1589860916137695]}, {"fish_idx": 94, "predator_index": 0, "fish_position": [0.4210854768753052, 1.7143875360488892], "predator_position": [0.3920954763889313, 1.459688663482666], "predator_velocity": [0.3954605460166931, 0.5212620496749878]}, {"fish_idx": 4, "predator_index": 0, "fish_position": [-2.232318878173828, -0.627318263053894], "predator_position": [-2.0286898612976074, -0.39312461018562317], "predator_velocity": [-1.3991925716400146, -0.057325657457113266]}, {"fish_idx": 30, "predator_index": 0, "fish_position": [-2.568300485610962, -0.5333357453346252], "predator_position": [-2.0286898612976074, -0.39312461018562317], "predator_velocity": [-1.3991925716400146, -0.057325657457113266]}, {"fish_idx": 49, "predator_index": 0, "fish_position": [-1.423129677772522, -0.7292100191116333], "predator_position": [-2.0286898612976074, -0.39312461018562317], "predator_velocity": [-1.3991925716400146, -0.057325657457113266]}], "step_one_clusters": {"total": 12, "angle_bin_deg": 30.0, "speed_bin": 0.4, "clusters": [{"angle_deg_start": 60.0, "angle_deg_end": 90.0, "speed_bin_start": 0.8, "speed_bin_end": 1.2000000000000002, "count": 3, "share": 0.25}, {"angle_deg_start": 180.0, "angle_deg_end": 210.0, "speed_bin_start": 1.2000000000000002, "speed_bin_end": 1.6, "count": 3, "share": 0.25}, {"angle_deg_start": 330.0, "angle_deg_end": 360.0, "speed_bin_start": 1.6, "speed_bin_end": 2.0, "count": 2, "share": 0.16666666666666666}, {"angle_deg_start": 90.0, "angle_deg_end": 120.0, "speed_bin_start": 1.2000000000000002, "speed_bin_end": 1.6, "count": 1, "share": 0.08333333333333333}, {"angle_deg_start": 180.0, "angle_deg_end": 210.0, "speed_bin_start": 0.8, "speed_bin_end": 1.2000000000000002, "count": 1, "share": 0.08333333333333333}, {"angle_deg_start": 30.0, "angle_deg_end": 60.0, "speed_bin_start": 1.6, "speed_bin_end": 2.0, "count": 1, "share": 0.08333333333333333}, {"angle_deg_start": 30.0, "angle_deg_end": 60.0, "speed_bin_start": 0.4, "speed_bin_end": 0.8, "count": 1, "share": 0.08333333333333333}]}, "pre_roll_stats_summary": {"sampled_episodes": 12, "spawn_radius": {"count": 12, "mean": 1.0671862959861755, "std": 0.28909485418919717, "p10": 0.802312171459198, "p50": 1.1489509344100952, "p90": 1.3470200300216675, "min": 0.3067166805267334, "max": 1.4554446935653687}, "spawn_angle_deg": {"count": 12, "mean": -11.153081367413202, "std": 108.3871727781467, "p10": -155.88754119873047, "p50": 10.766100227832794, "p90": 125.33984832763673, "min": -163.64581298828125, "max": 165.07894897460938}, "initial_heading_deg": {"count": 12, "mean": -41.341595689455666, "std": 75.01255879827116, "p10": -130.96677169799804, "p50": -72.26031112670898, "p90": 60.51513862609864, "min": -142.5011444091797, "max": 72.77833557128906}, "final_heading_deg": {"count": 12, "mean": 33.036283016204834, "std": 99.27741454762536, "p10": -158.0809232711792, "p50": 79.77448654174805, "p90": 107.11338653564454, "min": -175.6136932373047, "max": 128.47349548339844}, "initial_speed": {"count": 12, "mean": 1.5000000099341075, "std": 5.877097232242043e-08, "p10": 1.5, "p50": 1.5, "p90": 1.5000001072883606, "min": 1.4999998807907104, "max": 1.5000001192092896}, "final_speed": {"count": 12, "mean": 1.1926407876114051, "std": 0.5584603532501764, "p10": 0.6183056652545929, "p50": 1.2375167608261108, "p90": 1.8242887616157533, "min": 0.08096648752689362, "max": 2.156400442123413}, "angle_jitter_deg": {"count": 240, "mean": 0.3127344657652854, "std": 10.065308046295852, "p10": -13.870588902706547, "p50": 1.419644940938153, "p90": 14.483116196915045, "min": -17.1065822173488, "max": 17.080930662885574}, "speed_scale": {"count": 240, "mean": 2.00140786061358, "std": 3.995048070324451, "p10": 0.2578865690973599, "p50": 0.8948464136653331, "p90": 3.2550295499760185, "min": 0.0012116708950857679, "max": 31.478599596488714}, "heading_bias_angle_deg": {"count": 12, "mean": 168.6584017788764, "std": 110.54288279440706, "p10": 22.575188781059012, "p50": 221.25776098673705, "p90": 268.3912830039306, "min": 7.586860604652942, "max": 306.8951624414268}, "prewarm_override_count": 0, "prewarm_override_ratio": 0.0, "spawn_angle_hist_deg": {"bins": [3, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0], "edges": [0.0, 30.0, 60.0, 90.0, 120.0, 150.0, 180.0, 210.0, 240.0, 270.0, 300.0, 330.0, 360.0]}, "initial_speed_hist": {"bins": [0, 0, 0, 0, 0, 0, 0, 0, 0, 12], "edges": [0.0, 0.16, 0.32, 0.48, 0.64, 0.8, 0.96, 1.12, 1.28, 1.44, 1.6]}}, "penalty_gate": {"event": "advance", "stage": 1, "phase_limit": 4, "success_streak": 0, "freeze_until": 36, "failure_detected": false, "failure_streak": 0, "rolling_p10_median": 500.0, "step_one_death_ratio": 0.010416666666666666, "last_success": {"iteration": 32, "step_one": 12, "step_one_ratio": 0.010416666666666666, "early_death_fraction_100": 0.06336805555555555, "first_death_p10": 500.0, "min_final_survival_rate": 0.8958333333333334}, "changed": true}}
